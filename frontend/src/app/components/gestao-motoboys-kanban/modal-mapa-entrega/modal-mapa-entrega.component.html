<app-base-modal
  [aberto]="aberto()"
  [titulo]="'ğŸ“ Rota de Entrega - Pedido #' + numeroPedido()"
  [tamanho]="'grande'"
  (onFechar)="fechar()">
  
  <div class="modal-mapa-conteudo">
    <div class="mapa-container" [class.carregando]="carregandoMapa()">
      @if (carregandoMapa()) {
        <div class="mapa-carregando">
          <div class="spinner"></div>
          <p>Carregando mapa...</p>
        </div>
      }
      <div #mapContainer class="mapa-embutido"></div>
    </div>

    @if (enderecoEntrega()) {
      <div class="endereco-info">
        <p class="endereco-texto">
          <strong>ğŸ“ EndereÃ§o:</strong> {{ enderecoEntrega() }}
        </p>
      </div>
    }

    <div class="acoes-mapa">
      @if (podeMarcarComoEntregue()) {
        <button
          type="button"
          class="btn-entregue"
          (click)="marcarComoEntregue()">
          âœ“ Marcar como Entregue
        </button>
      }
      <button
        type="button"
        class="btn-iniciar-viagem"
        [class.viagem-ativa]="viagemIniciada()"
        (click)="iniciarViagem()"
        [disabled]="!latitude() || !longitude()">
        @if (viagemIniciada()) {
          ğŸ›‘ Parar Viagem
        } @else {
          ğŸš€ Iniciar Viagem
        }
      </button>
      <button
        type="button"
        class="btn-abrir-maps"
        (click)="abrirNoGoogleMaps()"
        [disabled]="!latitude() || !longitude()">
        ğŸ—ºï¸ Abrir no Google Maps
      </button>
      <button
        type="button"
        class="btn-fechar"
        (click)="fechar()">
        Fechar
      </button>
    </div>
  </div>
</app-base-modal>

