<div class="seletor-motoboy-container" (document:click)="onClickFora($event)">
    <!-- Bot√£o/Display do motoboy atual -->
    <button type="button" class="seletor-motoboy-trigger" [class.tem-motoboy]="temMotoboyAtribuido()"
        [class.aberto]="aberto()" [disabled]="desabilitado() || carregando()" (click)="toggleDropdown()">

        @if (carregando()) {
        <span class="loading-icon">‚è≥</span>
        <span class="trigger-text">Carregando...</span>
        } @else if (temMotoboyAtribuido()) {
        <span class="motoboy-icon">üõµ</span>
        <span class="trigger-text">{{ motoboyAtual() }}</span>
        <span class="editar-icon">‚úèÔ∏è</span>
        } @else {
        <span class="atribuir-icon">‚ûï</span>
        <span class="trigger-text">Atribuir Motoboy</span>
        }

        <span class="dropdown-arrow" [class.rotated]="aberto()">‚ñº</span>
    </button>

    <!-- Dropdown lista de motoboys -->
    @if (aberto()) {
    <div class="seletor-motoboy-dropdown">
        @if (erro()) {
        <div class="dropdown-erro">
            <span>{{ erro() }}</span>
            <button type="button" class="btn-retry" (click)="carregarMotoboys()">Tentar novamente</button>
        </div>
        } @else if (motoboys().length === 0) {
        <div class="dropdown-vazio">
            <span>Nenhum motoboy ativo cadastrado.</span>
            <span class="dica">Cadastre motoboys em Administra√ß√£o ‚Üí Motoboys</span>
        </div>
        } @else {
        <ul class="motoboys-lista">
            @for (motoboy of motoboys(); track motoboy.id) {
            <li>
                <button type="button" class="motoboy-item" [class.selecionado]="motoboy.id === motoboyAtualId()"
                    (click)="selecionarMotoboy(motoboy)">
                    <span class="motoboy-info">
                        <span class="motoboy-nome">{{ motoboy.nome }}</span>
                        @if (motoboy.telefone) {
                        <span class="motoboy-telefone">üì± {{ motoboy.telefone }}</span>
                        }
                    </span>
                    @if (motoboy.veiculo || motoboy.placa) {
                    <span class="motoboy-veiculo">
                        {{ motoboy.veiculo }} {{ motoboy.placa ? '- ' + motoboy.placa : '' }}
                    </span>
                    }
                    @if (motoboy.id === motoboyAtualId()) {
                    <span class="check-icon">‚úì</span>
                    }
                </button>
            </li>
            }
        </ul>
        }
    </div>
    }
</div>