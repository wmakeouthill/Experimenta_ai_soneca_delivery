@if (aberto()) {
  <div class="modal-overlay" (click)="fecharOverlay($event)">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h3>Configurar Anima√ß√£o</h3>
      <p class="modal-description">
        As altera√ß√µes s√£o aplicadas imediatamente. Clique em "Salvar Configura√ß√µes" para persistir no sistema.
      </p>

      <div class="config-section">
        <div class="config-item">
          <label class="toggle-label">
            <span class="toggle-text">Ativar anima√ß√£o</span>
            <div class="toggle-switch">
              <input
                type="checkbox"
                [checked]="animacaoAtivada()"
                (change)="animacaoAtivada.set($any($event.target).checked)"
              />
              <span class="toggle-slider"></span>
            </div>
          </label>
        </div>

        <div class="config-item">
          <label>
            Intervalo entre anima√ß√µes (segundos):
            <input
              type="number"
              min="10"
              max="300"
              [value]="intervaloAnimacao()"
              (input)="intervaloAnimacao.set(+$any($event.target).value)"
              [disabled]="!animacaoAtivada()"
            />
          </label>
        </div>

        <div class="config-item">
          <label>
            Dura√ß√£o da anima√ß√£o (segundos):
            <input
              type="number"
              min="2"
              max="30"
              [value]="duracaoAnimacao()"
              (input)="duracaoAnimacao.set(+$any($event.target).value)"
              [disabled]="!animacaoAtivada()"
            />
          </label>
        </div>
      </div>

      <div class="config-section">
        <h4>V√≠deos da Anima√ß√£o</h4>
        <p class="section-description">
          Adicione at√© 2 v√≠deos que ser√£o exibidos durante a anima√ß√£o. Os v√≠deos ser√£o reproduzidos em sequ√™ncia.
        </p>

        <div class="video-upload-container">
          <div class="video-upload-item">
            <label class="video-upload-label">V√≠deo 1</label>
            @if (video1Url()) {
              <div class="video-preview-container">
                <video [src]="video1Url()!" controls class="video-preview"></video>
                <button
                  type="button"
                  class="btn-remover-video"
                  (click)="removerVideo1()"
                  aria-label="Remover v√≠deo 1"
                >
                  ‚úï
                </button>
              </div>
            } @else {
              <div class="video-upload-placeholder">
                <div class="placeholder-icon">üé¨</div>
                <p class="placeholder-text">Clique para adicionar v√≠deo</p>
                <p class="placeholder-hint">M√°ximo: 100MB</p>
                @if (carregandoVideo1()) {
                  <div class="loading-overlay">
                    <div class="spinner"></div>
                    <p>Processando v√≠deo...</p>
                  </div>
                }
                <input
                  type="file"
                  accept="video/*"
                  class="video-input"
                  (change)="onVideo1Selected($event)"
                  [disabled]="carregandoVideo1()"
                />
              </div>
            }
          </div>

          <div class="video-upload-item">
            <label class="video-upload-label">V√≠deo 2</label>
            @if (video2Url()) {
              <div class="video-preview-container">
                <video [src]="video2Url()!" controls class="video-preview"></video>
                <button
                  type="button"
                  class="btn-remover-video"
                  (click)="removerVideo2()"
                  aria-label="Remover v√≠deo 2"
                >
                  ‚úï
                </button>
              </div>
            } @else {
              <div class="video-upload-placeholder">
                <div class="placeholder-icon">üé¨</div>
                <p class="placeholder-text">Clique para adicionar v√≠deo</p>
                <p class="placeholder-hint">M√°ximo: 100MB</p>
                @if (carregandoVideo2()) {
                  <div class="loading-overlay">
                    <div class="spinner"></div>
                    <p>Processando v√≠deo...</p>
                  </div>
                }
                <input
                  type="file"
                  accept="video/*"
                  class="video-input"
                  (change)="onVideo2Selected($event)"
                  [disabled]="carregandoVideo2()"
                />
              </div>
            }
          </div>
        </div>
      </div>

      <div class="modal-buttons">
        <button type="button" class="btn-salvar" (click)="salvar()">
          Salvar Configura√ß√µes
        </button>
        <button type="button" class="btn-cancelar" (click)="fechar()">
          Fechar
        </button>
      </div>
    </div>
  </div>
}

